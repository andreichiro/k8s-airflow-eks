- name: metrics-reporter
  image: {{ .Values.metricsReporter.image }}
  imagePullPolicy: {{ .Values.metricsReporter.pullPolicy | default "IfNotPresent" }}
  env:
    - name: UBBAGENTPORT
      value: "6080"
    - name: COORDINATOR_USAGE_METRICS_URL
      value:  {{ print (.Values.internalTls | ternary "https" "http") "://localhost:" (.Values.internalTls | ternary .Values.internal.ports.https.port .Values.internal.ports.http.port) "/v1/cluster/usage" }}
    - name: POD_NAME
      valueFrom:
        fieldRef:
          fieldPath: metadata.name
    - name: NAMESPACE_NAME
      valueFrom:
        fieldRef:
          fieldPath: metadata.namespace